## Form Validator
---
Form Validator - это Django-приложение, предназначенное для валидации данных форм на основе заранее заданных шаблонов. Проект обеспечивает валидацию четырех типов полей: дата, телефон, электронная почта и текст.
***
## Содержание
<details>
 <summary> Функциональные требования </summary>
  
1. **Шаблоны форм**:
    * Шаблоны форм хранятся в базе данных.
    * Каждый шаблон содержит уникальное имя и определенный набор полей с указанием их типов.
2. **Типы полей**:
    * Всего поддерживается четыре типа данных полей: дата, телефон, электронная почта и текст.
    * Все типы, кроме текста, поддерживают валидацию.
3. **Валидация**:
    * Для полей типа "телефон" ожидается стандартный формат: +7 xxx xxx xx xx.
    * Для полей типа "дата" ожидаются форматы: DD.MM.YYYY или YYYY-MM-DD.
    * Поле типа "электронная почта" должно соответствовать стандартам электронной почты.
    * Все типы полей должны быть валидированы в соответствии с указанными требованиями.

4. **Эндпоинт валидации**:

    * Приложение предоставляет эндпоинт /get_form для валидации данных формы.
    * POST-запрос на этот эндпоинт с данными формы возвращает имя подходящего шаблона, если такой найден.

5. **Поиск подходящего шаблона**:
    * Шаблон считается подходящим, если все его поля присутствуют в данных формы.
    * Совпадающими полями считаются те, у которых совпадают имена и типы значений.

6. **Ответ на неудачный поиск**:
    * Если подходящего шаблона не найдено, возвращаются типы полей из данных формы в порядке валидации.
***
</details>

<details>
 <summary> Техническая часть </summary>

1. **Django-приложение**:
    * Проект разработан с использованием фреймворка Django.
    * Используются модели Django для хранения шаблонов форм.
2. **Эндпоинт валидации**:
    * Эндпоинт /get_form обрабатывает POST-запросы с данными формы.

3. **Валидация полей**:
   * Валидация полей происходит в соответствии с указанными требованиями.
   * Поля в форме могут быть больше, чем в шаблоне.
     
4. **Сортировка типов полей**:
   * Типы полей сортируются в порядке валидации: дата, телефон, электронная почта, текст.
5. **Тестирование**:
   * Для тестирования использован файл test_data.py, предоставляющий тестовые случаи.
</details>

<details>
 <summary> Технологии </summary>
  
  - Python 3.10
  - Django 3.2.3
  - Django REST framework 3.12.4
  - Docker
  - phonenumbers
  - python-dateutil
  - requests
 </details>

<details>
 <summary> Инструкции по установке </summary>
  
## Вариант 1: Запуск локально
**Клонирование репозитория**
```bash
git clone git@github.com:VlKazmin/form_validator.git
cd backend
```

**Установка зависимостей**:
```bash
pip install -r requirements.txt
```
**Запуск сервера:**
```bash
python manage.py runserver
```

## Вариант 2: Запуск через Docker Compose
**Клонирование репозитория**
```bash
git clone git@github.com:VlKazmin/form_validator.git
cd backend
```
**Запустить Docker Compose**:
```bash
docker-compose up -d
```

**Проект будет доступен по адресу -  http://localhost:8000/get_form/**
 </details>

 <details>
 <summary> Доступные команды </summary>

#### Загрузка фикстур   
```bash
python manage.py loaddata fixtures/form_templates_fixture.json
```
#### Запуск скрипта для тестирования
*Для работы скрипта сервер должен быть запущен*
```bash
cd test_script
python test_script.py
```
 </details>

<details>
<summary> Использование </summary>
.

- Формы уже предустановлены, но можно создать шаблоны форм через админку Django
- Для админ-панели доступен пользователь ```username - test``` и ```password test``` 
- Отправить POST запросы на /get_form/ для валидации данных формы.

### Пример успешной валидации

**Запрос**
```json
{
    "date": "2022-11-15",
    "phone": "+7 987 654 32 10",
    "email": "test@example.com",
    "text": "Some text"
}
```
**Ответ**
```json
{
    "name": "CustomForm",
    "field_name_1": "date",
    "field_name_2": "phone",
    "field_name_3": "email",
    "field_name_4": "text"
}
```

### Пример неудачной валидации
**Запрос**
```json
{
    "date": "invalid_date",
    "phone": "invalid_phone_number",
    "email": "invalid_email",
    "text": "Some text"
}
```
**Ответ**
```json
{
    "name": "TextForm",
    "field_name_1": "text"
}
```
**Запрос**
```json
{ "phone": "invalid_phone_number"}
```
**Ответ**
```json
{"phone": "text"}
```
 </details>
 
